docker build -t catchsegv-example .
#1 [internal] load build definition from Dockerfile
#1 sha256:30157c04f9cfc6db1b6ecf126fe30f09a98c9030e756cc95f995dd998f0bd65a
#1 transferring dockerfile: 37B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:dd40f80da8da05d0b58657cf041185ba19df8f9999551d0c77e50b47a3e37696
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:focal
#3 sha256:d8099b9e2a8d5949e23c58d0d8ac7c3b4e8785ea131ce18291d94cefef37ed4b
#3 DONE 0.8s

#4 [1/4] FROM docker.io/library/ubuntu:focal@sha256:adf73ca014822ad8237623d388cedf4d5346aa72c270c5acc01431cc93e18e2d
#4 sha256:448ec44a980a08bc081b7c32e438530fa8e78afb952d539c05f8a176f8669d54
#4 DONE 0.0s

#6 [internal] load build context
#6 sha256:ab7e3baa41b35a367cec6f84e45141edd48069db0c550651f44f7f1ed7af9c87
#6 transferring context: 638B done
#6 DONE 0.0s

#5 [2/4] RUN apt-get update && apt-get install -y clang
#5 sha256:62005328661a36b1d2af9d8dc9dc51c284c3a76257cb2f8d55b117e043ce60c3
#5 CACHED

#7 [3/4] COPY . .
#7 sha256:1898c34cbaf4206bcdd150ea8ec4dc72554e99bbc3f262971a1c4165255cccb9
#7 DONE 0.0s

#8 [4/4] RUN cc -o test -g -rdynamic broken.c
#8 sha256:b7d18564ac6fe86082f76524f556f15c6fab6a8d45bb446222b8d3eb19b2218e
#8 DONE 0.3s

#9 exporting to image
#9 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00
#9 exporting layers 0.0s done
#9 writing image sha256:675da7e70db4dba33db8bf0a7c261ce9a6d4cc63189bd76b0125f7c3df849886 done
#9 naming to docker.io/library/catchsegv-example done
#9 DONE 0.0s
docker run catchsegv-example
Segmentation fault
*** Segmentation fault
Register dump:

 RAX: 0000000000000000   RBX: 0000000000401160   RCX: 0000000000000000
 RDX: 00007ffc58034008   RSI: 00007ffc58033ff8   RDI: 0000000000000000
 RBP: 00007ffc58033ee0   R8 : 0000000000000000   R9 : 00007ff7713ead50
 R10: 00007ff7713d0858   R11: 00007ff7713c5be0   R12: 0000000000401020
 R13: 00007ffc58033ff0   R14: 0000000000000000   R15: 0000000000000000
 RSP: 00007ffc58033ee0

 RIP: 000000000040111c   EFLAGS: 00010246

 CS: 0033   FS: 0000   GS: 0000

 Trap: 0000000e   Error: 00000006   OldMask: 00000000   CR2: 00000000

 FPUCW: 0000037f   FPUSW: 00000000   TAG: 00000000
 RIP: 00000000   RDP: 00000000

 ST(0) 0000 0000000000000000   ST(1) 0000 0000000000000000
 ST(2) 0000 0000000000000000   ST(3) 0000 0000000000000000
 ST(4) 0000 0000000000000000   ST(5) 0000 0000000000000000
 ST(6) 0000 0000000000000000   ST(7) 0000 0000000000000000
 mxcsr: 1f80
 XMM0:  00000000000000000000000000000000 XMM1:  00000000000000000000000000000000
 XMM2:  00000000000000000000000000000000 XMM3:  00000000000000000000000000000000
 XMM4:  00000000000000000000000000000000 XMM5:  00000000000000000000000000000000
 XMM6:  00000000000000000000000000000000 XMM7:  00000000000000000000000000000000
 XMM8:  00000000000000000000000000000000 XMM9:  00000000000000000000000000000000
 XMM10: 00000000000000000000000000000000 XMM11: 00000000000000000000000000000000
 XMM12: 00000000000000000000000000000000 XMM13: 00000000000000000000000000000000
 XMM14: 00000000000000000000000000000000 XMM15: 00000000000000000000000000000000

Backtrace:
./test(foo+0xc)[0x40111c]
./test(main+0x1b)[0x40114b]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x7ff7712010b3]
./test(_start+0x2e)[0x40104e]

Memory map:

00400000-00401000 r--p 00000000 fe:01 2578485 /test
00401000-00402000 r-xp 00001000 fe:01 2578485 /test
00402000-00403000 r--p 00002000 fe:01 2578485 /test
00403000-00404000 r--p 00002000 fe:01 2578485 /test
00404000-00405000 rw-p 00003000 fe:01 2578485 /test
022fe000-0231f000 rw-p 00000000 00:00 0 [heap]
7ff7711bc000-7ff7711bf000 r--p 00000000 fe:01 2491353 /usr/lib/x86_64-linux-gnu/libgcc_s.so.1
7ff7711bf000-7ff7711d1000 r-xp 00003000 fe:01 2491353 /usr/lib/x86_64-linux-gnu/libgcc_s.so.1
7ff7711d1000-7ff7711d5000 r--p 00015000 fe:01 2491353 /usr/lib/x86_64-linux-gnu/libgcc_s.so.1
7ff7711d5000-7ff7711d6000 r--p 00018000 fe:01 2491353 /usr/lib/x86_64-linux-gnu/libgcc_s.so.1
7ff7711d6000-7ff7711d7000 rw-p 00019000 fe:01 2491353 /usr/lib/x86_64-linux-gnu/libgcc_s.so.1
7ff7711d7000-7ff7711da000 rw-p 00000000 00:00 0
7ff7711da000-7ff7711ff000 r--p 00000000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff7711ff000-7ff771377000 r-xp 00025000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff771377000-7ff7713c1000 r--p 0019d000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff7713c1000-7ff7713c2000 ---p 001e7000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff7713c2000-7ff7713c5000 r--p 001e7000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff7713c5000-7ff7713c8000 rw-p 001ea000 fe:01 2491328 /usr/lib/x86_64-linux-gnu/libc-2.31.so
7ff7713c8000-7ff7713cc000 rw-p 00000000 00:00 0
7ff7713d0000-7ff7713d1000 r--p 00000000 fe:01 2491310 /usr/lib/x86_64-linux-gnu/libSegFault.so
7ff7713d1000-7ff7713d4000 r-xp 00001000 fe:01 2491310 /usr/lib/x86_64-linux-gnu/libSegFault.so
7ff7713d4000-7ff7713d5000 r--p 00004000 fe:01 2491310 /usr/lib/x86_64-linux-gnu/libSegFault.so
7ff7713d5000-7ff7713d6000 r--p 00004000 fe:01 2491310 /usr/lib/x86_64-linux-gnu/libSegFault.so
7ff7713d6000-7ff7713d7000 rw-p 00005000 fe:01 2491310 /usr/lib/x86_64-linux-gnu/libSegFault.so
7ff7713d7000-7ff7713d9000 rw-p 00000000 00:00 0
7ff7713d9000-7ff7713da000 r--p 00000000 fe:01 2491306 /usr/lib/x86_64-linux-gnu/ld-2.31.so
7ff7713da000-7ff7713fd000 r-xp 00001000 fe:01 2491306 /usr/lib/x86_64-linux-gnu/ld-2.31.so
7ff7713fd000-7ff771405000 r--p 00024000 fe:01 2491306 /usr/lib/x86_64-linux-gnu/ld-2.31.so
7ff771406000-7ff771407000 r--p 0002c000 fe:01 2491306 /usr/lib/x86_64-linux-gnu/ld-2.31.so
7ff771407000-7ff771408000 rw-p 0002d000 fe:01 2491306 /usr/lib/x86_64-linux-gnu/ld-2.31.so
7ff771408000-7ff771409000 rw-p 00000000 00:00 0
7ffc58015000-7ffc58036000 rw-p 00000000 00:00 0 [stack]
7ffc5812d000-7ffc58131000 r--p 00000000 00:00 0 [vvar]
7ffc58131000-7ffc58133000 r-xp 00000000 00:00 0 [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0 [vsyscall]
make: *** [all] Error 139
